<div class="p-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center">
    <div class="flex items-center space-x-4">
        <span class="text-sm font-medium text-gray-600">Sort by:</span>
        <a hx-get="/api/resumes?sort_by={% if sort_by == 'name_asc' %}name_desc{% else %}name_asc{% endif %}"
           hx-target="#resume-list"
           hx-swap="outerHTML"
           class="text-sm cursor-pointer {% if sort_by.startswith('name') %}font-bold text-blue-700{% else %}text-blue-600 hover:underline{% endif %}">
            Name {% if sort_by == 'name_asc' %}&uarr;{% elif sort_by == 'name_desc' %}&darr;{% endif %}
        </a>
        <a hx-get="/api/resumes?sort_by={% if sort_by == 'created_at_desc' %}created_at_asc{% else %}created_at_desc{% endif %}"
           hx-target="#resume-list"
           hx-swap="outerHTML"
           class="text-sm cursor-pointer {% if sort_by.startswith('created_at') %}font-bold text-blue-700{% else %}text-blue-600 hover:underline{% endif %}">
            Created {% if sort_by == 'created_at_desc' %}&darr;{% elif sort_by == 'created_at_asc' %}&uarr;{% endif %}
        </a>
        <a hx-get="/api/resumes?sort_by={% if sort_by == 'updated_at_desc' %}updated_at_asc{% else %}updated_at_desc{% endif %}"
           hx-target="#resume-list"
           hx-swap="outerHTML"
           class="text-sm cursor-pointer {% if sort_by.startswith('updated_at') %}font-bold text-blue-700{% else %}text-blue-600 hover:underline{% endif %}">
            Modified {% if sort_by == 'updated_at_desc' %}&darr;{% elif sort_by == 'updated_at_asc' %}&uarr;{% endif %}
        </a>
    </div>
</div>

{% if not base_resumes and not refined_resumes %}
<div class="text-center py-8">
    <p class="text-gray-500">No resumes found.</p>
    <p class="text-gray-400 text-sm mt-2">Create your first resume using the "+ New Resume" button.</p>
</div>
{% else %}
    <div>
        <h3 class="text-lg font-semibold text-gray-700 mt-4 mb-2 px-3">Base Resumes</h3>
        {% if base_resumes %}
            {% for r in base_resumes %}
            <div class="resume-item p-3 border-b border-gray-200 flex justify-between items-center{% if selected_resume_id and r.id == selected_resume_id %} selected{% endif %}">
                <div>
                   <div class="font-medium text-gray-800">{{ r.name }}</div>
                   <div class="text-xs text-gray-500">ID: {{ r.id }}</div>
                   <div class="text-xs text-gray-400 mt-1">
                       {% if r.created_at %}Created: {{ r.created_at | strftime('%Y-%m-%d') }}{% endif %}{% if r.created_at and r.updated_at %} &bull; {% endif %}{% if r.updated_at %}Updated: {{ r.updated_at | strftime('%Y-%m-%d') }}{% endif %}
                   </div>
                </div>
                <div class="flex items-center space-x-2">
                    <a href="/resumes/{{ r.id }}/edit" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                        Edit
                    </a>
                    <button hx-delete="/api/resumes/{{ r.id }}"
                            hx-confirm="Are you sure you want to delete this resume?"
                            hx-target="body"
                            class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                        Delete
                    </button>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-gray-500 px-3 py-2">No base resumes found.</p>
        {% endif %}
    </div>

    <div class="mt-6">
        <h3 class="text-lg font-semibold text-gray-700 mt-4 mb-2 px-3">Applied Resumes</h3>
        <div class="px-3 mb-2">
            <input type="text"
                   id="refined-resume-search"
                   placeholder="Filter applied resumes..."
                   class="w-full p-2 border border-gray-300 rounded"
                   _="">
        </div>
         {% if refined_resumes %}
            {% for r in refined_resumes %}
            <div class="resume-item p-3 border-b border-gray-200 flex justify-between items-center{% if selected_resume_id and r.id == selected_resume_id %} selected{% endif %}">
                <div>
                   <div class="font-medium text-gray-800">{{ r.name }}</div>
                   <div class="text-xs text-gray-500">ID: {{ r.id }} - Parent: {{ r.parent_id }}</div>
                   <div class="text-xs text-gray-400 mt-1">
                       {% if r.created_at %}Created: {{ r.created_at | strftime('%Y-%m-%d') }}{% endif %}{% if r.created_at and r.updated_at %} &bull; {% endif %}{% if r.updated_at %}Updated: {{ r.updated_at | strftime('%Y-%m-%d') }}{% endif %}
                   </div>
                </div>
                <div class="flex items-center space-x-2">
                    <a href="/resumes/{{ r.id }}/view" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                        View
                    </a>
                    <button hx-delete="/api/resumes/{{ r.id }}"
                            hx-confirm="Are you sure you want to delete this resume?"
                            hx-target="body"
                            class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                        Delete
                    </button>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-gray-500 px-3 py-2">No applied resumes found.</p>
        {% endif %}
    </div>
{% endif %}
